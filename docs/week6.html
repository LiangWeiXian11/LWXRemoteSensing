<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>LWXRemoteSensing - 6&nbsp; Week 6 GEE</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./week7.html" rel="next">
<link href="./week5.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./week6.html"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Week 6 GEE</span></a></li></ol></nav>
      <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">LWXRemoteSensing</a> 
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Preface</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./week1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Week1 Introduction</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./week2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Week2 ppt</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./week3.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Week 3 Correction</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./week4.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Week 4 Policy</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./week5.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Week 5</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./week6.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Week 6 GEE</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./week7.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Week 7 Classification</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./week8.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Week 8 Advanced Classification</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./week9.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Week 9 SAR</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./group.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Group</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">References</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#summary" id="toc-summary" class="nav-link active" data-scroll-target="#summary"><span class="header-section-number">6.1</span> Summary</a>
  <ul class="collapse">
  <li><a href="#what-is-google-earth-engine" id="toc-what-is-google-earth-engine" class="nav-link" data-scroll-target="#what-is-google-earth-engine"><span class="header-section-number">6.1.1</span> What is Google Earth Engine</a></li>
  <li><a href="#data-formats" id="toc-data-formats" class="nav-link" data-scroll-target="#data-formats"><span class="header-section-number">6.1.2</span> Data formats</a></li>
  <li><a href="#client-vs-server-side" id="toc-client-vs-server-side" class="nav-link" data-scroll-target="#client-vs-server-side"><span class="header-section-number">6.1.3</span> Client vs server side</a></li>
  <li><a href="#scale" id="toc-scale" class="nav-link" data-scroll-target="#scale"><span class="header-section-number">6.1.4</span> Scale</a></li>
  </ul></li>
  <li><a href="#application" id="toc-application" class="nav-link" data-scroll-target="#application"><span class="header-section-number">6.2</span> Application</a>
  <ul class="collapse">
  <li><a href="#basic-guiding-of-user-interface" id="toc-basic-guiding-of-user-interface" class="nav-link" data-scroll-target="#basic-guiding-of-user-interface"><span class="header-section-number">6.2.1</span> Basic guiding of user interface</a></li>
  <li><a href="#constructor" id="toc-constructor" class="nav-link" data-scroll-target="#constructor"><span class="header-section-number">6.2.2</span> Constructor</a></li>
  <li><a href="#functions" id="toc-functions" class="nav-link" data-scroll-target="#functions"><span class="header-section-number">6.2.3</span> Functions:</a></li>
  <li><a href="#categories-of-geospatial-data" id="toc-categories-of-geospatial-data" class="nav-link" data-scroll-target="#categories-of-geospatial-data"><span class="header-section-number">6.2.4</span> Categories of geospatial data</a></li>
  </ul></li>
  <li><a href="#reflection" id="toc-reflection" class="nav-link" data-scroll-target="#reflection"><span class="header-section-number">6.3</span> Reflection</a>
  <ul class="collapse">
  <li><a href="#new-terms" id="toc-new-terms" class="nav-link" data-scroll-target="#new-terms"><span class="header-section-number">6.3.1</span> New terms</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Week 6 GEE</span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<section id="summary" class="level2" data-number="6.1">
<h2 data-number="6.1" class="anchored" data-anchor-id="summary"><span class="header-section-number">6.1</span> Summary</h2>
<section id="what-is-google-earth-engine" class="level3" data-number="6.1.1">
<h3 data-number="6.1.1" class="anchored" data-anchor-id="what-is-google-earth-engine"><span class="header-section-number">6.1.1</span> What is Google Earth Engine</h3>
<p>A planetary-scale platform for Earth science data &amp; analysis. <a href="https://earthengine.google.com/">Google Earth Engine</a></p>
<p>Google Earth Engine is a cloud-based platform developed by Google that allows users to analyze and visualize large geospatial datasets. It combines a vast archive of satellite imagery and other geospatial data <a href="https://developers.google.com/earth-engine/datasets/">(Google Earth Engine Data Catalog)</a> with a set of analysis capabilities powered by Google’s computational infrastructure. Developer’s document: <a href="https://developers.google.com/earth-engine/">(Google Earth Engine Documention)</a></p>
</section>
<section id="data-formats" class="level3" data-number="6.1.2">
<h3 data-number="6.1.2" class="anchored" data-anchor-id="data-formats"><span class="header-section-number">6.1.2</span> Data formats</h3>
<ul>
<li>Image = raster (Has bands)</li>
<li>Feature = vector (geometry and attributes (dictionary of properties in GEE))</li>
</ul>
</section>
<section id="client-vs-server-side" class="level3" data-number="6.1.3">
<h3 data-number="6.1.3" class="anchored" data-anchor-id="client-vs-server-side"><span class="header-section-number">6.1.3</span> Client vs server side</h3>
<p>GEE uses Browser/Server Architecture:</p>
<ul>
<li>In frontend – is Client side (for users)</li>
<li>In backend – is Server side (for complex calculation)</li>
</ul>
</section>
<section id="scale" class="level3" data-number="6.1.4">
<h3 data-number="6.1.4" class="anchored" data-anchor-id="scale"><span class="header-section-number">6.1.4</span> Scale</h3>
<p>In GEE the scale (resolution) is set by the output not input. (Earth Engine selects the pyramid with the closest scale to that of your analysis (or specified by it) and resamples as needed)</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="img/week6/Scale.png" class="img-fluid figure-img" width="662"></p>
<figcaption class="figure-caption">pixel resolution in GEE. Source: <a href="https://developers.google.com/earth-engine/guides/scale">scale in GEE</a></figcaption>
</figure>
</div>
</section>
</section>
<section id="application" class="level2" data-number="6.2">
<h2 data-number="6.2" class="anchored" data-anchor-id="application"><span class="header-section-number">6.2</span> Application</h2>
<section id="basic-guiding-of-user-interface" class="level3" data-number="6.2.1">
<h3 data-number="6.2.1" class="anchored" data-anchor-id="basic-guiding-of-user-interface"><span class="header-section-number">6.2.1</span> Basic guiding of user interface</h3>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="img/week6/user interface.png" class="img-fluid figure-img" width="493"></p>
<figcaption class="figure-caption">User interface . Source: <a href="https://andrewmaclachlan.github.io/CASA0023-lecture-5/#31">CASA0023 week6 lecture</a></figcaption>
</figure>
</div>
</section>
<section id="constructor" class="level3" data-number="6.2.2">
<h3 data-number="6.2.2" class="anchored" data-anchor-id="constructor"><span class="header-section-number">6.2.2</span> Constructor</h3>
<ul>
<li><p>IMG/Raster: <code>var dataset = ee.ImageCollection('LANDSAT/LC09/CO2/T1_L2');</code></p></li>
<li><p>Vector: <code>var dataset = ee.FeatureCollection('users/andrewmaclachlan/india');</code></p></li>
</ul>
</section>
<section id="functions" class="level3" data-number="6.2.3">
<h3 data-number="6.2.3" class="anchored" data-anchor-id="functions"><span class="header-section-number">6.2.3</span> Functions:</h3>
<p>There is a list of common functions that can be used in GEE.</p>
<ul>
<li><p><strong>Geometry operations (e.g.&nbsp;spatial operations)</strong></p>
<ul>
<li><p>Joins: left/right/inner join &amp;&amp; spatial join</p></li>
<li><p>Zonal statistics: average temperature per <u>region</u> &amp;&amp; <u>mean/maximun</u> value</p></li>
<li><p><u>High/Low</u> pass filtering: Smoothing and sharpening</p></li>
</ul></li>
<li><p><strong>Methods</strong></p>
<ul>
<li>Machine learning and Deep learning; Classification (Supervised and unsupervised); Regressions</li>
</ul></li>
<li><p><strong>Applications/outputs</strong></p>
<ul>
<li>Online charts； Scalable geospatial applications with GEE data; Users interactive interface (query the data &amp;&amp; Visualize the results)</li>
</ul></li>
</ul>
</section>
<section id="categories-of-geospatial-data" class="level3" data-number="6.2.4">
<h3 data-number="6.2.4" class="anchored" data-anchor-id="categories-of-geospatial-data"><span class="header-section-number">6.2.4</span> Categories of geospatial data</h3>
<p>(available in the GEE Data catalogue. <a href="https://developers.google.com/earth-engine/datasets/">(Google Earth Engine Data Catalog)</a>)</p>
<section id="high-resolution-imagery" class="level4" data-number="6.2.4.1">
<h4 data-number="6.2.4.1" class="anchored" data-anchor-id="high-resolution-imagery"><span class="header-section-number">6.2.4.1</span> High-Resolution imagery</h4>
<ul>
<li><p>Name: NAIP: National Agriculture Imagery Program</p></li>
<li><p>Time Availability: 2002-06-15T00:00:00Z–2022-12-12T00:00:00</p></li>
<li><p><strong>Resolution: 0.6 meters</strong></p></li>
<li><p>Bands</p></li>
</ul>
<table class="table">
<thead>
<tr class="header">
<th style="text-align: left;">Name</th>
<th style="text-align: left;">Units</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><code>R</code></td>
<td style="text-align: left;">dn</td>
<td style="text-align: left;">Red</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>G</code></td>
<td style="text-align: left;">dn</td>
<td style="text-align: left;">Green</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>B</code></td>
<td style="text-align: left;">dn</td>
<td style="text-align: left;">Blue</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>N</code></td>
<td style="text-align: left;">dn</td>
<td style="text-align: left;">Near infrared</td>
</tr>
</tbody>
</table>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="img/week6/High_resolution.png" class="img-fluid figure-img" width="555"></p>
<figcaption class="figure-caption">NAIP. Source: <a href="https://developers.google.com/earth-engine/datasets/catalog/USDA_NAIP_DOQQ#description">NAIP in GEE</a></figcaption>
</figure>
</div>
</section>
<section id="land-surface-diagnostics" class="level4" data-number="6.2.4.2">
<h4 data-number="6.2.4.2" class="anchored" data-anchor-id="land-surface-diagnostics"><span class="header-section-number">6.2.4.2</span> Land Surface Diagnostics</h4>
<ul>
<li><p>MERRA-2 M2T1NXLND: Land Surface Diagnostics V5.12.4<a href="https://developers.google.com/earth-engine/datasets/catalog/NASA_GSFC_MERRA_lnd_2#description">(Land Surface Data)</a></p>
<ul>
<li><p>M2T1NXLND (or tavg1_2d_lnd_Nx) is an hourly time-averaged data collection in Modern-Era Retrospective analysis for Research and Applications version 2 (MERRA-2). <strong>This collection consists of land surface diagnostics, such a baseflow flux, runoff, surface soil wetness, root zone soil wetness, water at surface layer, water at root zone layer, and soil temperature</strong> at six layers. The data field is time-stamped with the central time of an hour starting from 00:30 UTC, e.g.: 00:30, 01:30, ... , 23:30 UTC.</p></li>
<li><p>MERRA-2 is the latest version of global atmospheric reanalysis for the satellite era produced by NASA Global Modeling and Assimilation Office (GMAO) using the Goddard Earth Observing System Model (GEOS) version 5.12.4. The dataset covers the period of 1980-present with the latency of ~3 weeks after the end of a month.</p></li>
<li><p><strong>Resolution:</strong> 69375 meters</p></li>
</ul></li>
</ul>
</section>
<section id="climate-and-atmospheric-data" class="level4" data-number="6.2.4.3">
<h4 data-number="6.2.4.3" class="anchored" data-anchor-id="climate-and-atmospheric-data"><span class="header-section-number">6.2.4.3</span> Climate and Atmospheric Data</h4>
<p>Climate and atmospheric data from the European Space Agency’s Sentinel-5p satellites help <strong>monitor environmental impacts</strong> of conflicts. Some satellites measure gases like nitrogen dioxide, methane, and ozone daily, with high resolution, aiding in pinpointing local pollution sources like oil refineries or power plants.</p>
<ul>
<li><p>Copernicus Atmosphere Monitoring Service (CAMS) Global Near-Real-Time. <a href="https://developers.google.com/earth-engine/datasets/catalog/ECMWF_CAMS_NRT#bands">(CAMS Data)</a></p>
<ul>
<li><p>Dataset Availability: 2016-06-22T12:00:00Z–2024-02-29T12:00:00</p></li>
<li><p><strong>Resolution:</strong> 44528 meters</p></li>
<li><p>The Copernicus Atmosphere Monitoring Service provides the capacity to continuously monitor the composition of the Earth’s atmosphere at global and regional scales. The main global near-real-time production system is a data assimilation and forecasting suite providing two 5-day forecasts per day for aerosols and chemical compounds that are part of the chemical scheme. Prior to 2021-07-01 only two parameters were available, 1. Total Aerosol Optical Depth at 550 nm surface 2. Particulate matter d &lt; 25 um surface Note that system:time_start refers to forecast time.</p></li>
</ul></li>
<li><p><a href="https://developers.google.com/earth-engine/datasets/catalog/LANDSAT_LC08_C02_T1_L2#description">USGS Landsat 8</a> Level 2,&nbsp;Collection 2,&nbsp;Tier 1</p>
<ul>
<li><p>This dataset contains atmospherically corrected surface reflectance and land surface <strong>temperature</strong> derived from the data produced by the Landsat 8 OLI/TIRS sensors. These images contain 5 visible and near-infrared (VNIR) bands and 2 short-wave infrared (SWIR) bands processed to orthorectified surface reflectance, and one thermal infrared (TIR) band processed to orthorectified surface temperature. They also contain intermediate bands used in calculation of the ST products, as well as QA bands. Landsat 8 SR products are created with the Land Surface Reflectance Code (LaSRC). All Collection 2 ST products are created with a single-channel algorithm jointly created by the Rochester Institute of Technology (RIT) and National Aeronautics and Space Administration (NASA) Jet Propulsion Laboratory (JPL).</p></li>
<li><p>Dataset Availability: 2013-03-18T15:58:14Z–2024-02-25T03:20:27</p></li>
<li><p><strong>Resolution:</strong> 30 meters</p></li>
<li><p>Band: ST_B10 : Band 10 surface temperature</p></li>
</ul></li>
</ul>
</section>
</section>
</section>
<section id="reflection" class="level2" data-number="6.3">
<h2 data-number="6.3" class="anchored" data-anchor-id="reflection"><span class="header-section-number">6.3</span> Reflection</h2>
<p>This week’s lecture briefly introduce the Google Earth Engine (GEE) and its possible application aspects. In summary, GEE organizes raster data as images and collections, allowing for JavaScript-based analysis on both client and server sides. It employs loops and mapping techniques for data manipulation. GEE provides functions for loading collections, reducing images by region or neighborhood, performing regression analysis, and joining and filtering datasets, facilitating efficient geospatial analysis.</p>
<section id="new-terms" class="level3" data-number="6.3.1">
<h3 data-number="6.3.1" class="anchored" data-anchor-id="new-terms"><span class="header-section-number">6.3.1</span> New terms</h3>
<ul>
<li><p>pyramid: a multi-resolution representation of an image dataset</p></li>
<li><p>resample: the process of changing the spatial resolution of a raster dataset</p></li>
<li><p>land surface <strong>diagnostics</strong>: a set of methods and tools used to analyze and understand various aspects of the Earth’s land surface</p></li>
</ul>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./week5.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Week 5</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./week7.html" class="pagination-link">
        <span class="nav-page-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Week 7 Classification</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->



</body></html>